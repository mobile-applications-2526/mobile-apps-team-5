<ion-header class="keep-header">
    <ion-toolbar>
      <ion-title>Profile Setup</ion-title>
    </ion-toolbar>
  </ion-header>
  
  <ion-content class="ion-padding">
  
    <div style="text-align: center; margin-top: 15px; margin-bottom: 30px;">
      <h2>Confirm your details</h2>
      <p style="color: gray;">Let's complete your profile so others can find you!</p>
    </div>
  
    <ion-item class="ion-margin-bottom">
      <ion-label position="stacked">First Name</ion-label>
      <ion-input [(ngModel)]="firstName" placeholder="e.g. Marie"></ion-input>
    </ion-item>
  
    <ion-item class="ion-margin-bottom">
      <ion-label position="stacked">Surname</ion-label>
      <ion-input [(ngModel)]="lastName" placeholder="e.g. Curie"></ion-input>
    </ion-item>
  
    <ion-item class="ion-margin-bottom">
      <ion-label position="stacked">Bio / Message</ion-label>
      <ion-textarea 
        [(ngModel)]="bio" 
        rows="4" 
        placeholder="Tell us a little about yourself...">
      </ion-textarea>
    </ion-item>

    <!-- interests section -->
    <div style="margin-top: 24px; margin-left: 16px;">
      <h3 style="margin-bottom: 8px;">Interests</h3>

      <!-- Loading state -->
      <div *ngIf="loadingInterests">
        <ion-skeleton-text
          animated
          style="width: 100%; height: 40px; margin-bottom: 8px;">
        </ion-skeleton-text>
      </div>

      <div *ngIf="!loadingInterests" class="interest-grid">
        <ion-item lines="none" *ngFor="let interest of allInterests">
          <ion-checkbox
            slot="start"
            [checked]="selectedInterests.includes(interest.name)"
            (ionChange)="onInterestToggle(interest.name, $event.detail.checked)">
          </ion-checkbox>
          <ion-label>{{ interest.name }}</ion-label>
        </ion-item>

        <p *ngIf="allInterests.length === 0" style="color: gray; font-size: 0.9em; margin-top: 4px;">
          No interests available yet.
        </p>
      </div>
    </div>
  
    <ion-button 
      expand="block" 
      color="primary" 
      class="ion-margin-top" 
      (click)="onComplete()" 
      [disabled]="loading">
      
      <span *ngIf="!loading">Complete Setup</span>
      <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
      
    </ion-button>
  
  </ion-content>